
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RamFinder • Resource</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" aria-hidden="true">RF</div>
      <div>
        <h1 id="title">Resource</h1>
        <div class="subtitle" id="subtitle"></div>
        <nav class="breadcrumb"><a href="index.html">Home</a> › <span>Details</span></nav>
      </div>
    </header>

    <section id="content">
      <table class="table">
        <tbody>
          <tr><th scope="row">Type</th><td id="type"></td></tr>
          <tr><th scope="row">Building</th><td id="building"></td></tr>
          <tr><th scope="row">Room</th><td id="room"></td></tr>
          <tr><th scope="row">Status</th><td id="status"></td></tr>
          <tr><th scope="row">Notes</th><td id="notes"></td></tr>
        </tbody>
      </table>

      <h3>Today's Hours</h3>
      <div id="todayHours" class="subtitle"></div>

      <h3>Weekly Hours</h3>
      <table class="table" id="hoursTable">
        <thead><tr><th>Day</th><th>Open</th><th>Close</th></tr></thead>
        <tbody></tbody>
      </table>

      <div class="actions" style="margin-top:14px">
        <a id="dirBtn" class="btn" target="_blank" rel="noopener">Directions</a>
        <a class="btn" href="index.html">Back to Search</a>
      </div>
    </section>

    <footer><div>Find more resources from the home page.</div></footer>
  </div>

  <script>
    const DATA_URL='data/resources.json'; const DOW=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
    function getParam(name){const u=new URL(window.location.href);return u.searchParams.get(name);}
    function isOpenNow(item,now=new Date()){const dow=DOW[now.getDay()];const slot=item.hours[dow];if(!slot||slot.closed)return false;const[oh,om]=(slot.open||'00:00').split(':').map(Number);const[ch,cm]=(slot.close||'00:00').split(':').map(Number);const openM=oh*60+om,closeM=ch*60+cm,curM=now.getHours()*60+now.getMinutes();return curM>=openM&&curM<=closeM;}
    async function init(){
      const id=getParam('id');
      const res=await fetch(DATA_URL); const DATA=await res.json();
      const item=DATA.find(x=>x.id===id);
      if(!item){document.getElementById('title').textContent='Resource Not Found';document.getElementById('content').innerHTML='<div class="empty">This resource is unavailable.</div>';return;}
      document.getElementById('title').textContent=item.name;
      document.getElementById('subtitle').textContent=item.building+(item.room?(' • '+item.room):'');
      document.getElementById('type').textContent=item.type;
      document.getElementById('building').textContent=item.building;
      document.getElementById('room').textContent=item.room||'—';
      document.getElementById('notes').textContent=item.notes||'—';
      const open=isOpenNow(item); document.getElementById('status').innerHTML=open?'<span class="open">Open Now</span>':'<span class="closed">Closed</span>';
      // Today's hours
      const today=new Date(); const dow=DOW[today.getDay()]; const slot=item.hours[dow];
      const todayStr=(slot&&!slot.closed)?(dow+': '+slot.open+'–'+slot.close):(dow+': Closed'); document.getElementById('todayHours').textContent=todayStr;
      // Weekly hours
      const tbody=document.querySelector('#hoursTable tbody'); tbody.innerHTML='';
      for(const d of DOW){const s=item.hours[d]; const tr=document.createElement('tr'); tr.innerHTML='<td>'+d+'</td><td>'+(s&&!s.closed?s.open:'—')+'</td><td>'+(s&&!s.closed?s.close:'—')+'</td>'; tbody.appendChild(tr);}
      // Directions
      const dir=document.getElementById('dirBtn'); dir.href='https://www.google.com/maps/search/'+encodeURIComponent(item.name+' '+item.building+' Colorado State University'); dir.textContent='Directions';
    }
    init();
  </script>
</body>
</html>
